
Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-mpnb6[0m
{"level":"warn","ts":1572330331.9359896,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1572330331.9365022,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-7c7c5[0m
{"level":"warn","ts":1572330332.204385,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1572330332.2051518,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source\""}

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-hoaitang-go-demo-6-pr-3-serverl-5lcts[0m
{"level":"warn","ts":1572330347.322661,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1572330347.8559623,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/********/go-demo-6.git @ master in path /workspace/source"}

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:ca79ac04a3ffa46**652d38883232e351aec1f7c,3:e624f162e1814ad5140d095bad24b57d7264da8d
DEBUG: ran git fetch --unshallow origin e624f162e1814ad5140d095bad24b57d7264da8d: ca79ac04a3ffa46**652d38883232e351aec1f7c: in 
DEBUG: ran git checkout master in 
DEBUG: ran git reset --hard ca79ac04a3ffa46**652d38883232e351aec1f7c in 
DEBUG: ran clean --force -d . in 
DEBUG: ran git merge e624f162e1814ad5140d095bad24b57d7264da8d in 
Merged SHA e624f162e1814ad5140d095bad24b57d7264da8d with commit message 'Code coverage' into base branch master
Merged SHA 50319707dc35c56a48c42a4dbf955c20d4e9e37f with commit message 'rollout status' into base branch master

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-unit-tests[0m
go: finding github.com/stretchr/testify v1.2.2
go: finding github.com/pmezard/go-difflib v1.0.0
go: finding github.com/stretchr/objx v0.1.1
go: finding github.com/prometheus/common v0.0.0-20181126121408-4724e9255275
go: finding github.com/beorn7/perks v0.0.0-20180321164747-3a771d992973
go: finding github.com/prometheus/client_model v0.0.0-20180712105110-5c3871d89910
go: finding github.com/prometheus/procfs v0.0.0-20181204211112-1dc9a6cbc91a
go: finding github.com/prometheus/client_golang v0.9.2
go: finding github.com/matttproud/golang_protobuf_extensions v1.0.1
go: finding github.com/golang/protobuf v1.2.0
go: finding github.com/davecgh/go-spew v1.1.1
go: finding gopkg.in/mgo.v2 v2.0.0-20180705113604-9856a29383ce
go: finding golang.org/x/net v0.0.0-20181201002055-351d144fa1fc
go: finding golang.org/x/sync v0.0.0-20181108010431-42b317875d0f
go: downloading github.com/prometheus/client_golang v0.9.2
go: downloading gopkg.in/mgo.v2 v2.0.0-20180705113604-9856a29383ce
go: extracting github.com/prometheus/client_golang v0.9.2
go: downloading github.com/prometheus/common v0.0.0-20181126121408-4724e9255275
go: downloading github.com/beorn7/perks v0.0.0-20180321164747-3a771d992973
go: downloading github.com/prometheus/procfs v0.0.0-20181204211112-1dc9a6cbc91a
go: downloading github.com/prometheus/client_model v0.0.0-20180712105110-5c3871d89910
go: downloading github.com/golang/protobuf v1.2.0
go: extracting github.com/beorn7/perks v0.0.0-20180321164747-3a771d992973
go: extracting gopkg.in/mgo.v2 v2.0.0-20180705113604-9856a29383ce
go: extracting github.com/prometheus/client_model v0.0.0-20180712105110-5c3871d89910
go: extracting github.com/prometheus/procfs v0.0.0-20181204211112-1dc9a6cbc91a
go: extracting github.com/prometheus/common v0.0.0-20181126121408-4724e9255275
go: downloading github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting github.com/matttproud/golang_protobuf_extensions v1.0.1
go: extracting github.com/golang/protobuf v1.2.0
CGO_ENABLED=0 GO15VENDOREXPERIMENT=1 go test --run UnitTest \
-v -coverprofile=coverage.txt -covermode=atomic
go: downloading github.com/stretchr/testify v1.2.2
go: extracting github.com/stretchr/testify v1.2.2
go: downloading github.com/pmezard/go-difflib v1.0.0
go: downloading github.com/stretchr/objx v0.1.1
go: downloading github.com/davecgh/go-spew v1.1.1
go: extracting github.com/pmezard/go-difflib v1.0.0
go: extracting github.com/davecgh/go-spew v1.1.1
go: extracting github.com/stretchr/objx v0.1.1
=== RUN   TestMainUnitTestSuite
=== RUN   TestMainUnitTestSuite/Test_HelloServer_Waits_WhenDelayIsPresent
=== RUN   TestMainUnitTestSuite/Test_HelloServer_WritesHelloWorld
=== RUN   TestMainUnitTestSuite/Test_HelloServer_WritesNokEventually
=== RUN   TestMainUnitTestSuite/Test_HelloServer_WritesOk
=== RUN   TestMainUnitTestSuite/Test_PersonServer_InvokesUpsertId_WhenPutPerson
=== RUN   TestMainUnitTestSuite/Test_PersonServer_Panics_WhenFindReturnsError
=== RUN   TestMainUnitTestSuite/Test_PersonServer_Panics_WhenUpsertIdReturnsError
=== RUN   TestMainUnitTestSuite/Test_PersonServer_WritesPeople
=== RUN   TestMainUnitTestSuite/Test_RunServer_InvokesListenAndServe
=== RUN   TestMainUnitTestSuite/Test_SetupMetrics_InitializesHistogram
--- PASS: TestMainUnitTestSuite (0.01s)
    --- PASS: TestMainUnitTestSuite/Test_HelloServer_Waits_WhenDelayIsPresent (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_HelloServer_WritesHelloWorld (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_HelloServer_WritesNokEventually (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_HelloServer_WritesOk (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_PersonServer_InvokesUpsertId_WhenPutPerson (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_PersonServer_Panics_WhenFindReturnsError (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_PersonServer_Panics_WhenUpsertIdReturnsError (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_PersonServer_WritesPeople (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_RunServer_InvokesListenAndServe (0.00s)
    --- PASS: TestMainUnitTestSuite/Test_SetupMetrics_InitializesHistogram (0.00s)
PASS
coverage: 75.0% of statements
ok  	go-demo-6	0.009s

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-code-coverage[0m

  _____          _
 / ____|        | |
| |     ___   __| | ___  ___ _____   __
| |    / _ \ / _` |/ _ \/ __/ _ \ \ / /
| |___| (_) | (_| |  __/ (_| (_) \ V /
 \_____\___/ \__,_|\___|\___\___/ \_/
                              Bash-8a28df4


[0;31mx>[0m No CI provider detected.
    Testing inside Docker? [0;36mhttp://docs.codecov.io/docs/testing-with-docker[0m
    Testing with Tox? [0;36mhttps://docs.codecov.io/docs/python#section-testing-with-tox[0m
    [0;90mproject root:[0m .
[0;90m-->[0m token set from env
    [0;32mYaml not found, that's ok! Learn more at[0m [0;36mhttp://docs.codecov.io/docs/codecov-yaml[0m
[0;90m==>[0m Running gcov in . [0;90m(disable via -X gcov)[0m
find: unrecognized: -exe**ir
BusyBox v1.29.3 (2019-01-24 07:45:07 UTC) multi-call binary.

Usage: find [-HL] [PATH]... [OPTIONS] [ACTIONS]

Search for files and perform actions on them.
First failed action stops processing of current file.
Defaults: PATH is current directory, action is '-print'

	-L,-follow	Follow symlinks
	-H		...on command line only
	-xdev		Don't descend directories on other filesystems
	-maxdepth N	Descend at most N levels. -maxdepth 0 applies
			actions to command line arguments only
	-mindepth N	Don't act on first N levels
	-depth		Act on directory *after* traversing it

Actions:
	( ACTIONS )	Group actions for -o / -a
	! ACT		Invert ACT's success/failure
	ACT1 [-a] ACT2	If ACT1 fails, stop, else do ACT2
	ACT1 -o ACT2	If ACT1 succeeds, stop, else do ACT2
			Note: -a has higher priority than -o
	-name PATTERN	Match file name (w/o directory name) to PATTERN
	-iname PATTERN	Case insensitive -name
	-path PATTERN	Match path to PATTERN
	-ipath PATTERN	Case insensitive -path
	-regex PATTERN	Match path to regex PATTERN
	-type X		File type is X (one of: f,d,l,b,c,s,p)
	-perm MASK	At least one mask bit (+MASK), all bits (-MASK),
			or exactly MASK bits are set in file's mode
	-mtime DAYS	mtime is greater than (+N), less than (-N),
			or exactly N days in the past
	-mmin MINS	mtime is greater than (+N), less than (-N),
			or exactly N minutes in the past
	-newer FILE	mtime is more recent than FILE's
	-inum N		File has inode number N
	-user NAME/ID	File is owned by given user
	-group NAME/ID	File is owned by given group
	-size N[bck]	File size is N (c:bytes,k:kbytes,b:512 bytes(def.))
			+/-N: file size is bigger/smaller than N
	-links N	Number of links is greater than (+N), less than (-N),
			or exactly N
	-prune		If current file is directory, don't descend into it
If none of the following actions is specified, -print is assumed
	-print		Print file name
	-print0		Print file name, NUL terminated
	-exec CMD ARG ;	Run CMD with all instances of {} replaced by
			file name. Fails if CMD exits with nonzero
	-exec CMD ARG + Run CMD with {} replaced by list of file names
	-delete		Delete current file/directory. Turns on -depth option
[0;90m==>[0m Python coveragepy not found
[0;90m==>[0m Searching for coverage reports in:
    [0;32m+[0m .
    [0;90m->[0m Found 1 reports
[0;90m==>[0m Detecting git/mercurial file structure
[0;90m==>[0m Reading reports
    [0;32m+[0m ./coverage.txt [0;90mbytes=1289[0m
[0;90m==>[0m Appending adjustments
    [0;36mhttp://docs.codecov.io/docs/fixing-reports[0m
    [0;32m+[0m Found adjustments
[0;90m==>[0m Gzipping contents
[0;90m==>[0m Uploading reports
    [0;90murl:[0m https://codecov.io
    [0;90mquery:[0m branch=master&commit=e624f162e1814ad5140d095bad24b57d7264da8d&build=&build_url=&name=&tag=&slug=********%2Fgo-demo-6&service=&flags=&pr=&job=
    [0;90m->[0m Pinging Codecov
https://codecov.io/upload/v4?package=bash-8a28df4&token=2ec3d739-7838-4518-b6ab-0fc3aa6db84c&branch=master&commit=e624f162e1814ad5140d095bad24b57d7264da8d&build=&build_url=&name=&tag=&slug=********%2Fgo-demo-6&service=&flags=&pr=&job=
    [0;90m->[0m Uploading
    [0;32m->[0m View reports at [0;36mhttps://codecov.io/github/********/go-demo-6/commit/e624f162e1814ad5140d095bad24b57d7264da8d[0m

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-make-linux[0m
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GO15VENDOREXPERIMENT=1 go build -ldflags '' -o bin/go-demo-6 main.go

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] No base image, nothing to extract            
[36mINFO[0m[0000] cmd: EXPOSE                                  
[36mINFO[0m[0000] Adding exposed port: 8080/tcp                
[36mINFO[0m[0000] Using files from context: [/workspace/source/bin] 
[36mINFO[0m[0000] Skipping unpacking as no commands require it. 
[36mINFO[0m[0000] Taking snapshot of full filesystem...        
[36mINFO[0m[0000] EXPOSE 8080                                  
[36mINFO[0m[0000] cmd: EXPOSE                                  
[36mINFO[0m[0000] Adding exposed port: 8080/tcp                
[36mINFO[0m[0000] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0000] ENTRYPOINT ["/go-demo-6"]                    
[36mINFO[0m[0000] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0000] Using files from context: [/workspace/source/bin] 
[36mINFO[0m[0000] COPY ./bin/ /                                
[36mINFO[0m[0000] Taking snapshot of files...                  
2019/10/29 06:26:16 pushed blob: sha256:e5f5c988f9f2f4040acf96b1b3b046af72a1c4b6446ef80e02e41bc566bb4120
2019/10/29 06:26:17 pushed blob: sha256:f5828f3df377b379dd7bd5478b123a1a90eb05bb5311c06810e2e02651660966
2019/10/29 06:26:18 874511187178.dkr.ecr.us-west-2.amazonaws.com/********/go-demo-6:0.0.0-SNAPSHOT-PR-3-2: digest: sha256:dbe35f94dd8af3cb4c15735ec099c07c2bc226d28a39dcf8257dcbc4d79b7190 size: 428

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-3-2/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-3-2/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: 874511187178.dkr.ecr.us-west-2.amazonaws.com\/********\/go-demo-6|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-3-2/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-3-2" >> requirements.yaml
jx step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
WARNING: No author for commit: 50319707dc35c56a48c42a4dbf955c20d4e9e37f
WARNING: No author for commit: e624f162e1814ad5140d095bad24b57d7264da8d
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: verintawsome.com
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: 874511187178.dkr.ecr.us-west-2.amazonaws.com/********/go-demo-6
    tag: 0.0.0-SNAPSHOT-PR-3-2
Deleting and cloning the Jenkins X versions repo
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with ref refs/heads/master to /builder/home/.jx/jenkins-x-versions


Updating PipelineActivities ********-go-demo-6-pr-3-2 which has status Running
Preview application is now available at: http://go-demo-6.**-********-go-demo-6-pr-3.verintawsome.com

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-rollout[0m
deployment "preview-preview" successfully rolled out

Showing logs for build [32mhoaitang-go-demo-6-pr-3-serverl-kwmpd-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-functional-tests[0m
CGO_ENABLED=0 GO15VENDOREXPERIMENT=1 go \
test -test.v --run FunctionalTest \
-coverprofile=coverage.txt -covermode=atomic
=== RUN   TestFunctionalTestSuite
=== RUN   TestFunctionalTestSuite/Test_Hello_ReturnsStatus200
2019/10/29 06:27:12 Sending a request to http://go-demo-6.**-********-go-demo-6-pr-3.verintawsome.com/demo/hello
=== RUN   TestFunctionalTestSuite/Test_Person_ReturnsStatus200
2019/10/29 06:27:12 Sending a request to http://go-demo-6.**-********-go-demo-6-pr-3.verintawsome.com/demo/person
--- PASS: TestFunctionalTestSuite (0.03s)
    --- PASS: TestFunctionalTestSuite/Test_Hello_ReturnsStatus200 (0.01s)
    --- PASS: TestFunctionalTestSuite/Test_Person_ReturnsStatus200 (0.01s)
PASS
coverage: 1.4% of statements
ok  	go-demo-6	0.029s
